# ๐จ ุญู ุณุฑูุน: ุฎุทุฃ Firestore Indexes

## ุงููุดููุฉ

ุนูุฏ ุชุดุบูู ุงูุชุทุจููุ ุชุธูุฑ ูุฐู ุงูุฃุฎุทุงุก:

```
[Firestore]: Listen for Query(...) failed:
Status{code=FAILED_PRECONDITION, description=The query requires an index...}
```

---

## โ ุงูุญู ุงูุณุฑูุน (ุฏูููุฉ ูุงุญุฏุฉ)

### **ุงูุฎุทูุฉ 1: ุงูุณุฎ ุงูุฑูุงุจุท ูู ุงูู Logs**

ุนูุฏ ุธููุฑ ุงูุฎุทุฃุ ุงุจุญุซ ุนู ุฑุงุจุท ูุจุฏุฃ ุจู:

```
https://console.firebase.google.com/v1/r/project/...
```

### **ุงูุฎุทูุฉ 2: ุงูุชุญ ุงูุฑุงุจุท**

- ุงูุตู ุงูุฑุงุจุท ูู ุงููุชุตูุญ
- ุณููุชุญ Firebase Console ูุน ุงูู Index ุฌุงูุฒ

### **ุงูุฎุทูุฉ 3: ุงุถุบุท "Create Index"**

- ุงุถุบุท ุงูุฒุฑ ุงูุฃุฒุฑู **Create Index**
- ุงูุชุธุฑ 1-5 ุฏูุงุฆู ุญุชู ููุชูู ุงูุจูุงุก

### **ุงูุฎุทูุฉ 4: ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู**

```bash
flutter run
```

---

## ๐ ุงูู Indexes ุงููุทููุจุฉ

ุฅุฐุง ูู ุชุฌุฏ ุงูุฑูุงุจุท ูู ุงูู logsุ ุฃูุดุฆ ูุฐู ุงูู Indexes ูุฏููุงู:

### **1. Index ููููุงุชูุฑ:**

- Collection: `invoices`
- Fields:
  - `userId` โ Ascending
  - `issueDate` โ Descending

### **2. Index ูููุฑุงุกุงุช:**

- Collection: `meter_readings`
- Fields:
  - `userId` โ Ascending
  - `readingDate` โ Descending

---

## ๐ ูููุฒูุฏ ูู ุงูุชูุงุตูู

ุงูุฑุฃ: `FIRESTORE_INDEXES_SETUP.md` (ุฏููู ุดุงูู ูุน 3 ุทุฑู)

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุฅูุดุงุก ุงูู Indexes:

- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก `FAILED_PRECONDITION` ูู ุงูู logs
- โ ุงูุจูุงูุงุช ุชูุญูู ุจูุฌุงุญ ูู ุดุงุดุงุช ุงูููุงุชูุฑ ูุงููุฑุงุกุงุช
